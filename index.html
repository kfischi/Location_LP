<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>בעלי מתחמי נופש - זה הזמן למלא את היומן!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
            background: #0a0a0a;
        }

        /* Premium Glass Background */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(245, 87, 108, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(79, 172, 254, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: ultraGradientShift 20s ease infinite;
            z-index: -3;
        }

        .background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 60% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.05) 0%, transparent 30%);
            backdrop-filter: blur(100px);
            z-index: -2;
        }

        @keyframes ultraGradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 50%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 80px 40px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 40px;
            box-shadow: 
                0 40px 80px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(30px);
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #ffffff, #e8efff, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
            font-weight: 800;
        }

        .header .subtitle {
            font-size: 1.6rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 40px;
            font-weight: 300;
            line-height: 1.8;
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
        }

        /* Experience Section */
        .experience-section {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            padding: 60px;
            border-radius: 35px;
            margin-bottom: 60px;
            box-shadow: 
                0 35px 70px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(30px);
            text-align: center;
        }

        .experience-section h2 {
            color: rgba(255, 255, 255, 0.95);
            font-size: 3rem;
            margin-bottom: 50px;
            font-weight: 800;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .experience-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .experience-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.8));
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 40px 30px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 
                0 20px 45px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .experience-card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 
                0 30px 60px rgba(102, 126, 234, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .exp-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .exp-number {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .exp-text {
            font-size: 1rem;
            font-weight: 500;
        }

        /* Form Section */
        .form-section {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 60px;
            border-radius: 40px;
            box-shadow: 
                0 40px 80px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(30px);
        }

        .form-title {
            text-align: center;
            margin-bottom: 50px;
            color: rgba(255, 255, 255, 0.95);
            font-size: 2.8rem;
            font-weight: 800;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .property-section,
        .additional-section,
        .contact-section {
            margin-bottom: 50px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 25px;
            border-left: 4px solid rgba(102, 126, 234, 0.6);
            backdrop-filter: blur(20px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 18px 25px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 18px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.95);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.8);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.2),
                0 12px 35px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .checkbox-item:hover {
            background: rgba(102, 126, 234, 0.15);
            border-color: rgba(102, 126, 234, 0.3);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }

        .checkbox-item label {
            color: rgba(255, 255, 255, 0.9);
            margin: 0;
            cursor: pointer;
        }

        .submit-btn {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 22px 60px;
            border-radius: 60px;
            font-size: 1.4rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: block;
            margin: 50px auto 30px;
            min-width: 350px;
            box-shadow: 
                0 15px 40px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
        }

        .submit-btn:hover {
            transform: translateY(-4px) scale(1.05);
            background: linear-gradient(135deg, rgba(102, 126, 234, 1), rgba(118, 75, 162, 1));
            box-shadow: 
                0 20px 50px rgba(102, 126, 234, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .success-message {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.9), rgba(46, 204, 113, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-top: 30px;
            display: none;
            box-shadow: 
                0 15px 40px rgba(39, 174, 96, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
        }

        .trust-indicators {
            text-align: center;
            margin-top: 50px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            backdrop-filter: blur(25px);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .trust-indicators h4 {
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 25px;
            font-size: 1.6rem;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .trust-indicators p {
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.8;
            font-size: 1.1rem;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
            
            .form-section {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="background"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>🏖️ בעלי מתחמי נופש – זה הזמן למלא את היומן! 🏡</h1>
            <p class="subtitle">יש לכם וילה, צימר או סוויטות יוקרתיות?<br>
            אל תשאירו תאריכים פנויים – אנחנו מביאים לכם לקוחות אמיתיים מכל הארץ!</p>
        </div>

        <!-- Experience Section -->
        <div class="experience-section">
            <h2>🏆 הניסיון והמומחיות שלנו</h2>
            <div class="experience-grid">
                <div class="experience-card">
                    <div class="exp-icon">📈</div>
                    <div class="exp-number">500+</div>
                    <div class="exp-text">מתחמי נופש שותפים</div>
                </div>
                <div class="experience-card">
                    <div class="exp-icon">🎯</div>
                    <div class="exp-number">95%</div>
                    <div class="exp-text">שיעור הצלחה במילוי תאריכים</div>
                </div>
                <div class="experience-card">
                    <div class="exp-icon">⭐</div>
                    <div class="exp-number">4.9</div>
                    <div class="exp-text">דירוג שביעות רצון ממוצע</div>
                </div>
                <div class="experience-card">
                    <div class="exp-icon">🏖️</div>
                    <div class="exp-number">7+</div>
                    <div class="exp-text">שנות ניסיון בתחום הנופש</div>
                </div>
            </div>
        </div>

        <!-- Form Section -->
        <div class="form-section">
            <h2 class="form-title">🌟 הירשמו עכשיו וקבלו לקוחות איכותיים</h2>
            
            <form id="propertyForm">
                <!-- Property Information Section -->
                <div class="property-section">
                    <h3 class="section-title">🏖️ פרטי המתחם</h3>
                    <div class="form-grid">
                        <div>
                            <div class="form-group">
                                <label for="region">איזור בארץ *</label>
                                <select id="region" name="region" required>
                                    <option value="">בחר איזור</option>
                                    <option value="galilee">גליל עליון ותחתון</option>
                                    <option value="golan">רמת הגולן</option>
                                    <option value="haifa">חיפה והקריות</option>
                                    <option value="sharon">השרון</option>
                                    <option value="center">מרכז הארץ</option>
                                    <option value="tel-aviv">תל אביב והמטרופולין</option>
                                    <option value="jerusalem">ירושלים והסביבה</option>
                                    <option value="judean-hills">הרי יהודה</option>
                                    <option value="dead-sea">ים המלח</option>
                                    <option value="negev">צפון הנגב</option>
                                    <option value="south-negev">דרום הנגב</option>
                                    <option value="eilat">אילת והערבה</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="propertyType">סוג העסק *</label>
                                <select id="propertyType" name="propertyType" required>
                                    <option value="">בחר סוג עסק</option>
                                    <option value="villa">וילה פרטית</option>
                                    <option value="zimmer">צימר רומנטי</option>
                                    <option value="luxury-suites">סוויטות יוקרתיות</option>
                                    <option value="boutique-hotel">מלון בוטיק</option>
                                    <option value="resort">מתחם נופש משפחתי</option>
                                    <option value="glamping">גלמפינג</option>
                                    <option value="eco-lodge">לודג' אקולוגי</option>
                                    <option value="other">אחר</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="roomCount">כמות חדרים/יחידות *</label>
                                <select id="roomCount" name="roomCount" required>
                                    <option value="">בחר כמות</option>
                                    <option value="1">1 יחידה</option>
                                    <option value="2-3">2-3 יחידות</option>
                                    <option value="4-6">4-6 יחידות</option>
                                    <option value="7-10">7-10 יחידות</option>
                                    <option value="10+">מעל 10 יחידות</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <div class="form-group">
                                <label for="targetAudience">קהל יעד עיקרי *</label>
                                <select id="targetAudience" name="targetAudience" required>
                                    <option value="">בחר קהל יעד</option>
                                    <option value="couples">זוגות צעירים</option>
                                    <option value="families">משפחות עם ילדים</option>
                                    <option value="groups">קבוצות חברים</option>
                                    <option value="business">עסקי ועמיתים</option>
                                    <option value="luxury">לקוחות יוקרה VIP</option>
                                    <option value="seniors">גיל הזהב</option>
                                    <option value="mixed">מעורב - כל הקהלים</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="priceRange">טווח מחירים ללילה (ש"ח)</label>
                                <select id="priceRange" name="priceRange">
                                    <option value="">בחר טווח מחירים</option>
                                    <option value="under-300">מתחת ל-300</option>
                                    <option value="300-500">300-500</option>
                                    <option value="500-800">500-800</option>
                                    <option value="800-1200">800-1200</option>
                                    <option value="1200-2000">1200-2000</option>
                                    <option value="2000-3000">2000-3000</option>
                                    <option value="over-3000">מעל 3000</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="capacity">קיבולת מקסימלית (אנשים)</label>
                                <input type="number" id="capacity" name="capacity" min="1" max="100" placeholder="למשל: 8">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Information Section -->
                <div class="additional-section">
                    <h3 class="section-title">📋 מידע נוסף</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="availability">זמינות נוכחית</label>
                            <select id="availability" name="availability">
                                <option value="">בחר זמינות</option>
                                <option value="immediate">זמין מיד</option>
                                <option value="this-week">השבוע</option>
                                <option value="next-week">השבוע הבא</option>
                                <option value="this-month">החודש</option>
                                <option value="next-month">החודש הבא</option>
                                <option value="flexible">גמיש - לפי בקשה</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="experience">שנות ניסיון בתחום</label>
                            <select id="experience" name="experience">
                                <option value="">בחר ניסיון</option>
                                <option value="new">חדש בתחום</option>
                                <option value="1-2">1-2 שנים</option>
                                <option value="3-5">3-5 שנים</option>
                                <option value="5-10">5-10 שנים</option>
                                <option value="10+">מעל 10 שנים</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>🏊‍♀️ מה כלול במתחם? (בחר את הרלוונטיים)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="pool" name="amenities" value="pool">
                                <label for="pool">🏊‍♀️ בריכה פרטית</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="jacuzzi" name="amenities" value="jacuzzi">
                                <label for="jacuzzi">🛁 ג'קוזי/ספא</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="kitchen" name="amenities" value="kitchen">
                                <label for="kitchen">🍳 מטבח מאובזר</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="parking" name="amenities" value="parking">
                                <label for="parking">🚗 חניה פרטית</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="garden" name="amenities" value="garden">
                                <label for="garden">🌳 גן/מרפסת נוף</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="spa" name="amenities" value="spa">
                                <label for="spa">💆‍♀️ חדר טיפולים</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="bbq" name="amenities" value="bbq">
                                <label for="bbq">🔥 מתקני BBQ</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="wifi" name="amenities" value="wifi">
                                <label for="wifi">📶 WiFi מהיר</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="ac" name="amenities" value="ac">
                                <label for="ac">❄️ מיזוג מרכזי</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="breakfast" name="amenities" value="breakfast">
                                <label for="breakfast">🥐 ארוחת בוקר</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="view" name="amenities" value="view">
                                <label for="view">🌅 נוף מדהים</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="pets" name="amenities" value="pets">
                                <label for="pets">🐕 ידידותי לחיות מחמד</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="additionalInfo">🌟 מידע נוסף (תיאור מיוחד, מיקום מדויק, הערות)</label>
                        <textarea id="additionalInfo" name="additionalInfo" placeholder="ספר לנו מה הופך את המתחם שלך למיוחד... נוף, מיקום, שירותים מיוחדים, אטרקציות בסביבה וכו'"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="urgency">📅 רמת דחיפות למילוי תאריכים</label>
                        <select id="urgency" name="urgency">
                            <option value="">בחר רמת דחיפות</option>
                            <option value="high">גבוהה - אני רוצה לזרז הזמנות</option>
                            <option value="medium">בינונית - אני מחפש שיתוף פעולה קבוע</option>
                            <option value="low">נמוכה - רק לשמור על קשר</option>
                        </select>
                    </div>
                </div>

                <!-- Contact Information Section -->
                <div class="contact-section">
                    <h3 class="section-title">📞 פרטי יצירת קשר</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ownerName">שם מלא של הבעלים *</label>
                            <input type="text" id="ownerName" name="ownerName" required>
                        </div>

                        <div class="form-group">
                            <label for="phone">טלפון *</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>

                        <div class="form-group">
                            <label for="email">אימייל</label>
                            <input type="email" id="email" name="email">
                        </div>

                        <div class="form-group">
                            <label for="propertyName">שם המתחם/העסק</label>
                            <input type="text" id="propertyName" name="propertyName">
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">📲 דברו איתנו עכשיו ונמלא לכם את התאריכים!</button>
                
                <div id="successMessage" class="success-message">
                    ✅ הפרטים נשלחו בהצלחה! נחזור אליכם תוך 2-4 שעות עם הצעות לקוחות איכותיים
                </div>
            </form>
        </div>

        <div class="trust-indicators">
            <h4>🛡️ אמינות ומקצועיות ברמה הגבוהה ביותר</h4>
            <p>✅ ניסיון של למעלה מ-7 שנים עם מאות לקוחות מרוצים<br>
            ✅ חיבורים ישירים למלונות, אתרי נופש ומתחמים בכל הארץ<br>
            ✅ שירות 24/7, תמיכה מלאה ויעוץ מקצועי<br>
            ✅ תשלום רק על הצלחות - ללא עלויות קבועות או התחייבויות</p>
        </div>
    </div>

    <script>
        // הגדרות Supabase (תצטרך להחליף עם הפרטים שלך)
        const SUPABASE_URL = 'YOUR_SUPABASE_URL_HERE';
        const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY_HERE';
        
        // מערכת CRM מתקדמת עם Supabase
        let crmData = [];
        let supabaseEnabled = false;

        // בדיקה אם Supabase מוגדר
        if (SUPABASE_URL !== 'YOUR_SUPABASE_URL_HERE' && SUPABASE_ANON_KEY !== 'YOUR_SUPABASE_ANON_KEY_HERE') {
            supabaseEnabled = true;
            // טעינת Supabase
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2';
            document.head.appendChild(script);
        }

        // פונקציה לשליחה ל-Supabase
        async function saveToSupabase(propertyData) {
            if (!supabaseEnabled) {
                console.log('Supabase לא מוגדר, שומר ב-localStorage');
                return false;
            }

            try {
                const { createClient } = supabase;
                const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                
                const { data, error } = await supabaseClient
                    .from('luxury_properties')
                    .insert([propertyData]);

                if (error) {
                    console.error('שגיאה בשמירה ל-Supabase:', error);
                    return false;
                }

                console.log('נתונים נשמרו בהצלחה ל-Supabase:', data);
                return true;
            } catch (error) {
                console.error('שגיאה בחיבור ל-Supabase:', error);
                return false;
            }
        }

        // פונקציה לשליחת מייל מעוצב
        async function sendStyledEmail(propertyData) {
            // תבנית מייל מעוצבת
            const emailBody = `
                <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #667eea, #764ba2); padding: 40px; border-radius: 20px;">
                    <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                        <h1 style="color: #667eea; text-align: center; margin-bottom: 30px;">🏖️ לקוח חדש - מתחם נופש יוקרתי!</h1>
                        
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h2 style="color: #667eea; margin-bottom: 15px;">🏖️ פרטי המתחם</h2>
                            <p><strong>📍 איזור:</strong> ${getRegionText(propertyData.region)}</p>
                            <p><strong>🏠 סוג עסק:</strong> ${getPropertyTypeText(propertyData.propertyType)}</p>
                            <p><strong>🛏️ חדרים:</strong> ${propertyData.roomCount}</p>
                            <p><strong>👥 קהל יעד:</strong> ${getTargetAudienceText(propertyData.targetAudience)}</p>
                            ${propertyData.priceRange ? `<p><strong>💰 טווח מחירים:</strong> ${getPriceRangeText(propertyData.priceRange)}</p>` : ''}
                            ${propertyData.capacity ? `<p><strong>👥 קיבולת:</strong> עד ${propertyData.capacity} אנשים</p>` : ''}
                        </div>

                        ${propertyData.amenities && propertyData.amenities.length > 0 ? `
                        <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">🏊‍♀️ מתקנים וכלולים</h3>
                            <p>${propertyData.amenities.map(amenity => getAmenityText(amenity)).join(', ')}</p>
                        </div>` : ''}

                        <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">📞 פרטי יצירת קשר</h3>
                            <p><strong>👤 שם:</strong> ${propertyData.ownerName}</p>
                            <p><strong>📱 טלפון:</strong> <a href="tel:${propertyData.phone}" style="color: #667eea; text-decoration: none;">${propertyData.phone}</a></p>
                            ${propertyData.email ? `<p><strong>📧 אימייל:</strong> <a href="mailto:${propertyData.email}" style="color: #667eea;">${propertyData.email}</a></p>` : ''}
                            ${propertyData.propertyName ? `<p><strong>🏢 שם עסק:</strong> ${propertyData.propertyName}</p>` : ''}
                        </div>

                        ${propertyData.additionalInfo ? `
                        <div style="background: #f0f8f0; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">🌟 מידע נוסף</h3>
                            <p>${propertyData.additionalInfo}</p>
                        </div>` : ''}

                        <div style="text-align: center; margin-top: 30px;">
                            <a href="tel:${propertyData.phone}" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; display: inline-block; margin: 5px;">📞 התקשר עכשיו</a>
                            ${propertyData.email ? `<a href="mailto:${propertyData.email}" style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; padding: 15px 30px; text-decoration: none; border-radius: 25px; display: inline-block; margin: 5px;">📧 שלח מייל</a>` : ''}
                        </div>

                        <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; color: #666; font-size: 14px;">
                            <p>🕐 נוצר: ${new Date(propertyData.submissionDate).toLocaleDateString('he-IL')} ${new Date(propertyData.submissionDate).toLocaleTimeString('he-IL')}</p>
                            <p>🆔 מזהה: ${propertyData.id}</p>
                        </div>
                    </div>
                </div>
            `;

            // כאן תוכל להוסיף קוד לשליחת מייל (EmailJS או פתרון אחר)
            console.log('מייל מעוצב מוכן לשליחה:', emailBody);
            
            // דוגמה ל-EmailJS (תצטרך להגדיר חשבון)
            /*
            emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
                to_email: "your-email@example.com",
                subject: `לקוח חדש: ${propertyData.ownerName} - ${getPropertyTypeText(propertyData.propertyType)}`,
                html_content: emailBody
            });
            */
        }

        // פונקציות עזר
        function getRegionText(region) {
            const regions = {
                'galilee': 'גליל עליון ותחתון',
                'golan': 'רמת הגולן',
                'haifa': 'חיפה והקריות',
                'sharon': 'השרון',
                'center': 'מרכז הארץ',
                'tel-aviv': 'תל אביב והמטרופולין',
                'jerusalem': 'ירושלים והסביבה',
                'judean-hills': 'הרי יהודה',
                'dead-sea': 'ים המלח',
                'negev': 'צפון הנגב',
                'south-negev': 'דרום הנגב',
                'eilat': 'אילת והערבה'
            };
            return regions[region] || region;
        }

        function getPropertyTypeText(type) {
            const types = {
                'villa': 'וילה פרטית',
                'zimmer': 'צימר רומנטי',
                'luxury-suites': 'סוויטות יוקרתיות',
                'boutique-hotel': 'מלון בוטיק',
                'resort': 'מתחם נופש משפחתי',
                'glamping': 'גלמפינג',
                'eco-lodge': 'לודג\' אקולוגי',
                'other': 'אחר'
            };
            return types[type] || type;
        }

        function getTargetAudienceText(audience) {
            const audiences = {
                'couples': 'זוגות צעירים',
                'families': 'משפחות עם ילדים',
                'groups': 'קבוצות חברים',
                'business': 'עסקי ועמיתים',
                'luxury': 'לקוחות יוקרה VIP',
                'seniors': 'גיל הזהב',
                'mixed': 'מעורב - כל הקהלים'
            };
            return audiences[audience] || audience;
        }

        function getPriceRangeText(range) {
            const ranges = {
                'under-300': 'מתחת ל-300 ש"ח',
                '300-500': '300-500 ש"ח',
                '500-800': '500-800 ש"ח',
                '800-1200': '800-1200 ש"ח',
                '1200-2000': '1200-2000 ש"ח',
                '2000-3000': '2000-3000 ש"ח',
                'over-3000': 'מעל 3000 ש"ח'
            };
            return ranges[range] || range;
        }

        function getAmenityText(amenity) {
            const amenities = {
                'pool': 'בריכה פרטית',
                'jacuzzi': 'ג\'קוזי/ספא',
                'kitchen': 'מטבח מאובזר',
                'parking': 'חניה פרטית',
                'garden': 'גן/מרפסת נוף',
                'spa': 'חדר טיפולים',
                'bbq': 'מתקני BBQ',
                'wifi': 'WiFi מהיר',
                'ac': 'מיזוג מרכזי',
                'breakfast': 'ארוחת בוקר',
                'view': 'נוף מדהים',
                'pets': 'ידידותי לחיות מחמד'
            };
            return amenities[amenity] || amenity;
        }

        // טעינת נתונים מ-localStorage (גיבוי)
        function loadData() {
            const savedData = localStorage.getItem('luxuryPropertiesCRM');
            if (savedData) {
                crmData = JSON.parse(savedData);
            }
        }

        // שמירת נתונים ב-localStorage (גיבוי)
        function saveData() {
            localStorage.setItem('luxuryPropertiesCRM', JSON.stringify(crmData));
        }

        // טיפול בטופס
        document.getElementById('propertyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const propertyData = {};
            
            // איסוף נתונים בסיסיים
            for (let [key, value] of formData.entries()) {
                if (key === 'amenities') {
                    if (!propertyData.amenities) {
                        propertyData.amenities = [];
                    }
                    propertyData.amenities.push(value);
                } else {
                    propertyData[key] = value;
                }
            }
            
            // הוספת מטא-דאטה
            propertyData.submissionDate = new Date().toISOString();
            propertyData.id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
            propertyData.status = 'new';
            propertyData.source = 'landing-page';
            propertyData.ipAddress = 'מוסתר'; // בייצור ניתן לקבל מהשרת
            
            // ולידציות נוספות
            if (!propertyData.ownerName || !propertyData.phone || !propertyData.region || !propertyData.propertyType) {
                alert('אנא מלא את כל השדות החובה');
                return;
            }
            
            // בדיקת טלפון
            const phoneRegex = /^[0-9\-\+\s\(\)]{8,15}$/;
            if (!phoneRegex.test(propertyData.phone)) {
                alert('מספר טלפון לא תקין');
                return;
            }
            
            // בדיקת אימייל אם קיים
            if (propertyData.email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(propertyData.email)) {
                    alert('כתובת אימייל לא תקינה');
                    return;
                }
            }

            // הצגת הודעת שליחה
            const submitBtn = this.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '⏳ שולח נתונים...';
            submitBtn.disabled = true;
            
            try {
                // שמירה ב-Supabase
                const supabaseSuccess = await saveToSupabase(propertyData);
                
                // שמירה ב-localStorage כגיבוי
                crmData.push(propertyData);
                saveData();
                
                // שליחת מייל מעוצב
                await sendStyledEmail(propertyData);
                
                // הצגת הודעת הצלחה
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('successMessage').scrollIntoView({ 
                    behavior: 'smooth' 
                });
                
                // איפוס הטופס
                setTimeout(() => {
                    this.reset();
                    document.getElementById('successMessage').style.display = 'none';
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                }, 5000);
                
                console.log('נכס חדש נשמר:', propertyData);
                console.log('שמירה ב-Supabase:', supabaseSuccess ? 'הצליחה' : 'נכשלה - נשמר ב-localStorage');
                
            } catch (error) {
                console.error('שגיאה בשמירת הנתונים:', error);
                alert('אירעה שגיאה בשליחת הטופס. אנא נסה שוב.');
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });

        // התחלת המערכת
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            console.log('🚀 מערכת CRM למתחמי נופש יוקרתיים הופעלה בהצלחה');
            console.log('💡 טיפ: הגדר Supabase לקבלת פתרון CRM מלא');
        });
    </script>
</body>
</html>
